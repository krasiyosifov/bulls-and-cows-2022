<!DOCTYPE html>

<html>

<head>
    <link rel="stylesheet" href="index.css">
    <title>Bulls and Cows game</title>
    <link rel="stylesheet" href="index.css" />
</head>

<body>

    <script>
        function myFunction() {
            var numberValue = document.getElementById("my_number").value;
            console.log(numberValue);
            if (isNumberValid(numberValue)) {
                console.log("the number is valid");
                // TODO: put the result in the validation_result container
            } else {
                console.log("the number is invalid");
                // TODO: put the result in the validation_result container
            }
        }

        function isNumberValid(numberAsString) {
            var digits = numberAsString.split("");
            console.log(digits);
            for (let i = 0; i <= 3; i++) {
                d1 = digits[i];
                for (let j = i + 1; j <= 3; j++) {
                    d2 = digits[j];
                    if (d1 == d2) {
                        return false;
                    }
                }
            }
            return true;
        }

        let lastShownContainer = "home_scene_container";
        function showContainer(containerId) {
            console.log("container with ID=" + containerId + " must be visible");
            if (lastShownContainer != "") {
                document.getElementById(lastShownContainer).classList.add("off");
            }
            document.getElementById(containerId).classList.remove("off");
            lastShownContainer = containerId;
        }

        function checkNumberAndContinue() {
            //read the number from the form field
            var numberValue = document.getElementById("my_number").value;
            console.log(numberValue);

            //check if the number is valid
            if (isNumberValid(numberValue) == true) {
                //if valid goes to the next person or main game scene
                showContainer('main_game_screen_container')

                console.log("the number is valid");
                // TODO: put the result in the validation_result container
            }
            else {
                //if invalid shows error
                document.getElementById("playerDetailsNumberError").classList.remove("off");
                console.log("the number is invalid");

                // TODO: put the result in the validation_result container
            }
        }

        function checkNameAndContinue() {
            var playerName = document.getElementById("playerName").value;
            if (playerName != "") {
                document.getElementById("number_container").classList.remove("off");
                document.getElementById("playerDetailsNameError").classList.add("off");
            }
            else {
                document.getElementById("playerDetailsNameError").classList.remove("off");
            }
        }

    </script>

    <div id="home_scene_container" class="scene_container">


        <div id="home_scene_container" class="scene_container">

            <div class="bullsandcows">
                <h2>Bulls
                    <div class="homePageImages">

                        <img class="bullImgRotate" src="images/bullHomeScreen.png" width="170" height="170">
                        &
                        <img class="cowImgRotate" src="images/cowHomeScreen.png" width="150" height="150">

                    </div>
                    Cows
                </h2>
            </div>
            <div class="buttons">
                <button class="buttonPlay" onclick="showContainer('player_details_scene_container')">New Game</button>
                <button class="buttonPlay" onclick="showContainer('how_to_play_scene_container')">How to play</button>
            </div>
        </div>
    </div>



    <div id="player_details_scene_container" class="scene_container off">
        <!-- here goes the HTML code -->
        <div class="mainContainer">
            <div class="playerDetails">
                <form class="playerDetailsScene">
                    <div class="detailsPlayer">
                        <label for="name"><b>Enter nickname:</b></label>
                        <div class="playerInput">
                            <input class="inputPlayerName" type="text" id="playerName">
                            <button class="confirmButton" type="button" onclick="checkNameAndContinue()">✓</button>
                        </div>
                        <p class="errorLabel off" id="playerDetailsNameError">Please enter your nickname</p>
                    </div>
                    <div class="detailsPlayer off" id="number_container">
                        <label for="number"><b>Vicky enter number:</b></label>
                        <div class="playerInput">
                            <input class="inputPlayerNumber" type="text" id="my_number" minlength="4" maxlength="4">
                            <button class="confirmButton" type="button" onclick="checkNumberAndContinue()">✓</button>
                        </div>
                        <p class="errorLabel off" id="playerDetailsNumberError">Invalid number! Try again!</p>
                        <button class="howToPlay" onclick="showContainer('how_to_play_scene_container')">?</button>
                    </div>

                </form>
            </div>
            <button class="howToPlay"><b>?</b></button>

        </div>
    </div>

    <div id="winning_page_scene_container" class="scene_container off">
        <!-- here goes the HTML code -->
        <div class="endGame">
            <form>
                <div class="winningLabels">
                    <label for="theWinnerIs"><b>THE WINNER IS:</b></label><br>
                    <label for="winner"><b>...</b></label>
                </div>
                <div class="buttonOptions">
                    <button type="button" id="revengeButton"
                        onclick="showContainer('player_details_scene_container')">REVENGE</button>
                    <button type="button" id="newGameButton"
                        onclick="showContainer('player_details_scene_container')">NEW GAME</button>
                    <button type="button" id="exitButton" onclick="showContainer('home_scene_container')">EXIT</button>
                </div>
            </form>
        </div>
    </div>

    <div id="how_to_play_scene_container" class="scene_container off">
        <!-- here goes the HTML code -->
        <h1>How to play?</h1>
        <button class="closeButton" type="button" onclick="showContainer('home_scene_container')">X

        </button>

        <p>The game can be played by 2 people.</p>
        <p>First, Player1 enters their name and clicks the check button when they are done. After that a new text field
            appears where the player should input their chosen number, which should be kept secret from the other
            player.
            The digits must be all different. The number cannot start with 0. The number must have 4 digits. Same thing
            happens for Player2. </p>
        <p>Then, in turn, the players try to guess their opponent's number by inputting it in the four digit text field.
            The
            digits of the guessing number also must all be different. If the matching digits exist and are in their
            right
            positions, they are "bulls", if not, they are "cows". </p>
        <p>Example:</p>
        <ul>
            <li>P1’s number: 4271</li>
            <li>P2’s guessing number: 1234</li>
            <li>Answer: 1 bull and 2 cows. (The bull is "2", the cows are "4" and "1".)</li>
        </ul>
        <p>After the first round a list, which contains the already used guessing numbers, will appear in top left
            corner.
            On the right the player can look at the numbers from 1 to 9 and check which one is not needed anymore.</p>
        <p>In the top right corner there is a question button. If you need to check the rules of the game again you can
            press it.</p>
        <p>If both players win they can press the revenge button and play again.</p>
    </div>


    <div id="main_game_screen_container" class="scene_container off">

        <!-- here goes the HTML code -->
        main game
    </div>


</body>

</html>